/*! obs-model-validation 0.1.0 Copyright (c) 2013 Alan Plum. MIT licensed. */(function(e){function s(){var e,t;this.valid=i.computed(function(e){return function(){for(var t in e.model.attrs)if(e[t].valid&&!e[t].valid())return!1;return!0}}(this));for(var n in this.model.attrs){e=this.model.attrs[n];if(!e||!e.validate)continue;t=this[n],t.valid=(e.validate.lazy?i.computed.lazy:i.computed)(s.createValidator(e.validate.fn?e.validate.fn:e.validate,t)),t.valid.watch(t),this.valid.watch(t.valid),this._destructors.push(s.createDestructor(t,this.valid))}}var t=function(t){return e[t]},n=e.obs-model-s={},r=t("aug"),i=t("obs");r(s,{createValidator:function(e,t){if(typeof e=="function")return function(){return e(t())};if(e instanceof RegExp)return function(){return e.test(t())};throw new Error("Unknown validation type!")},createDestructor:function(e,t){return function(){e.valid.unwatch(e),t.unwatch(e.valid)}}}),n.validation=s})(this);