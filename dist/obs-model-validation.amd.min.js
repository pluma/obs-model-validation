/*! obs-model-validation 0.1.0 Copyright (c) 2013 Alan Plum. MIT licensed. */define(function(e,t){function i(){var e,t;this.valid=r.computed(function(e){return function(){for(var t in e.model.attrs)if(e[t].valid&&!e[t].valid())return!1;return!0}}(this));for(var n in this.model.attrs){e=this.model.attrs[n];if(!e||!e.validate)continue;t=this[n],t.valid=(e.validate.lazy?r.computed.lazy:r.computed)(i.createValidator(e.validate.fn?e.validate.fn:e.validate,t)),t.valid.watch(t),this.valid.watch(t.valid),this._destructors.push(i.createDestructor(t,this.valid))}}var n=e("aug"),r=e("obs");n(i,{createValidator:function(e,t){if(typeof e=="function")return function(){return e(t())};if(e instanceof RegExp)return function(){return e.test(t())};throw new Error("Unknown validation type!")},createDestructor:function(e,t){return function(){e.valid.unwatch(e),t.unwatch(e.valid)}}}),t.validation=i});