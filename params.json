{"name":"obs-model-validation","tagline":"validation plugin for observable models","body":"# Synopsis\r\n\r\nModel validation plugin for [observable models](https://github.com/pluma/obs-model).\r\n\r\n# Basic usage example\r\n\r\n```javascript\r\nvar User = model('User')\r\n    .use(validation),\r\n    .attr('id', {pattern: /^[1-9][0-9]+$/})\r\n    .attr('username', {\r\n        validate: function(v) {\r\n            return v && v.toLowerCase && v === v.toLowerCase();\r\n        }\r\n    });\r\n\r\nvar admin = new User({id: 1, username: 'admin'});\r\nconsole.log(admin.valid()); // true\r\nconsole.log(admin.id(), admin.id.valid()); // 1, true\r\nconsole.log(admin.username(), admin.username.valid()); // \"admin\", true\r\n\r\nadmin.valid.subscribe(function(valid) {\r\n    console.log('Admin user is now ' + (valid ? 'valid' : 'invalid'));\r\n});\r\n\r\nadmin.id(0);\r\n// -> \"Admin user is now invalid\"\r\nconsole.log(admin.id(), admin.id.valid()); // 0, false\r\nconsole.log(admin.valid()); // false\r\n\r\nadmin.id(1);\r\n// -> \"Admin user is now valid\"\r\nconsole.log(admin.id(), admin.id.valid()); // 1, true\r\nconsole.log(admin.valid()); // true\r\n\r\nadmin.username('ADMIN');\r\n// -> \"Admin user is now invalid\"\r\nconsole.log(admin.username(), admin.username.valid()); // \"ADMIN\", false\r\nconsole.log(admin.valid()); // false\r\n```\r\n\r\n# API\r\n\r\n## validation\r\n\r\nThe validation plugin. Use with `Model.use(validation)`.\r\n\r\n## Model.attr(name:String, options:Object)\r\n\r\nThe `options` argument is expanded to allow defining validation requirements for each field.\r\n\r\n### options.required:Boolean (Default: false)\r\n\r\nDefines whether the attribute is required. If `required` is set to `true`, the attribute will fail validation if its value is `null` or `undefined`. If `required` is set to `false`, the attribute will be exempt from further validation and marked valid if its value is `null` or `undefined`.\r\n\r\n### options.values:Array\r\n\r\nDefines an array of possible values that will exempt the attribute from further validation (resulting in it being marked as valid without having to pass any further validations defined on the attribute).\r\n\r\n**NOTE**: Uses [jkroso's equals 0.2.0](https://github.com/jkroso/equals/tree/0.2.0) for value comparison.\r\n\r\n### options.type\r\n\r\nDefines a type or an array of types the attribute value is expected to match. A type can be defined either as the string return value of a `typeof` check, a constructor function the value is expected to be an `instanceof` or the special string value `integer` which will match any whole `number` (including `Infinity`).\r\n\r\nIf the attribute value does not match any of the expected types, the attribute will fail validation.\r\n\r\n### options.lengthRange:Integer\r\n\r\nDefines a range the length of the attribute value is expected to match. If the value has no `length` property or the value of its `length` property is not a `number`, it will always fail this validation.\r\n\r\n#### options.lengthRange.min:Integer\r\n\r\nDefines the expected minimum length of the attribute value. If the length of the attribute value is less than `min`, it will fail validation.\r\n\r\n#### options.lengthRange.max:Integer\r\n\r\nDefines the expected maximum length of the attribute value. If the length of the attribute value is greater than `max`, it will fail validation.\r\n\r\n### options.valueRange\r\n\r\nDefines a range the attribute value is expected to match. If the value is not a `number`, it will always fail this validation.\r\n\r\n#### options.valueRange.min:Number and options.valueRange.minExclusive:Boolean\r\n\r\nDefines the expected minimum attribute value. If the attribute value is less than `min`, it will fail validation. If `minExclusive` is set to `true`, the attribute value will also fail if it is equal to `min`.\r\n\r\n#### options.valueRange.max:Number and options.valueRange.maxExclusive:Boolean\r\n\r\nDefines the expected maximum attribute value. If the attribute value is greater than `max`, it will fail validation. If `maxExclusive` is set to `true`, the attribute value will also fail if it is equal to `max`.\r\n\r\n#### options.valueRange.step:Number\r\n\r\nDefines a number the attribute value is expected to be a multiple of, offset by the smallest possible integer matching the `min` and `minExclusive` requirements, or `0` if `min` is not set.\r\n\r\nFor example: if `step` is set to `2` and `min` is set to `1` (`minExclusive` is not set or is set to `false`), the attribute value is expected to match `x * 2 + 1`, i.e. `1, 3, 5, 7, â€¦`.\r\n\r\n#### options.valueRange.multipleOf:Number\r\n\r\nDefines a number the attribute value is expected to be a multiple of (offset by `0`, rather than `min`).\r\n\r\n### options.pattern:RegExp\r\n\r\nA regular expression the attribute value is expected to be tested successfully against. If `pattern` is a string, it will be converted into a regular expression when the model instance is created. If [XRegExp](https://github.com/slevithan/xregexp) is available, string values will be converted using that library instead.\r\n\r\n**NOTE**: Although `pattern` SHOULD be set to a regular expression or a full string representation of a regular expression, any object that has a `test` method should behave as expected.\r\n\r\n### options.validate:Function\r\n\r\nDefines a custom validation function the attribute value will be passed to. The function will be bound to the model instance and should return `false` if the value has failed validation or `true` if the validation was successful.\r\n\r\nAlternatively, the function can return `null`, indicating the validation has failed tentatively, or the special value `validation.EXEMPT` (equivalent to the string value `exempt`) if the attribute should be exempted from further validation and marked valid. See below for further details.\r\n\r\n## Model.validation(validate:Function, attrs:Array)\r\n\r\nDefines a multi-attribute validation function and an array of attribute names it affects. The validation function will be passed the current value of each attribute in the order specified whenever the value of one of the attributes changes and is bound to the model instance.\r\n\r\nThe referenced attributes have to exist on the model instance at the time of its creation.\r\n\r\nMulti-attribute validations executed in the order they are added to the model, but will only be executed after all regular attribute validations have passed and the attribute value is not exempt from further validation.\r\n\r\nThe validation function should return `true`, `false`, `null` or `validation.EXEMPT` (see below).\r\n\r\n## Model#[attrName].valid\r\n\r\nEvery attribute receives an observable property `valid` which indicates whether the attribute value passed validation.\r\n\r\n## Model#valid\r\n\r\nEach model instance receives an observable property `valid` which indicates whether all attributes passed validation.\r\n\r\n# Validation function return values\r\n\r\nAttribute validation functions and mult-attribute validation functions MUST return one of the following values. If multiple validation functions exist for the same attribute (e.g. because the attribute is affected by other multi-attribute validations), they will be executed in the order they were defined on the model, with regular attribute validation functions being executed before multi-attribute validations affecting the same attribute.\r\n\r\n## `true`\r\n\r\nThe validation was tentatively successful. Any pending validations on the same attribute will be executed normally. If this was the last validation to be executed on this attribute, the attribute will be marked as *valid*.\r\n\r\n## `false`\r\n\r\nThe validation has failed. Any pending validations on the same attribute will be ignored and the attribue will be marked as *invalid*.\r\n\r\n## `null`\r\n\r\nThe validation has tentatively failed. Any pending validations on the same attribute will be executed normally. If this was the last validation to be executed on this attribute, the attribute will be marked as *invalid*.\r\n\r\n## `validation.EXEMPT`\r\n\r\nThe validation was successful. Any pending validations on the same attribute will be ignored and the attribute will be marked as *valid*.\r\n\r\n**NOTE**: The string value `exempt` can be used instead. This value is available as a property on the `validation` plugin to avoid sneaky typos.\r\n\r\n# License\r\n\r\nThe MIT/Expat license","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}